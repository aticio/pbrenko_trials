from pbrenko_trials.domain.brick import Brick
from pbrenko_trials.use_cases.tools.score import calculate_score


def test_score():
    bricks = [Brick(type='first', open=42373.73, close=42373.73, low=42373.73, high=42373.73), Brick(type='down', open=42373.73, close=39704.18501, low=39704.18501, high=42373.73), Brick(type='down', open=39704.18501, close=37285.81094, low=37285.81094, high=39704.18501), Brick(type='up', open=39704.18501, close=42035.69909, low=37250.01, high=42035.69909), Brick(type='up', open=42035.69909, close=44754.77909, low=37777.34, high=44754.77909), Brick(type='down', open=42035.69909, close=39085.55021, low=39085.55021, high=47434.8), Brick(type='down', open=39085.55021, close=36684.45326, low=36684.45326, high=39085.55021), Brick(type='down', open=36684.45326, close=34381.61615, low=34381.61615, high=36684.45326), Brick(type='down', open=34381.61615, close=32237.19695, low=32237.19695, high=34381.61615), Brick(type='down', open=32237.19695, close=30092.77775, low=30092.77775, high=32237.19695), Brick(type='down', open=30092.77775, close=28197.970220000003, low=28197.970220000003, high=30092.77775), Brick(type='down', open=28197.970220000003, close=26523.774830000002, low=26523.774830000002, high=28197.970220000003), Brick(type='down', open=26523.774830000002, close=24849.57944, low=24849.57944, high=26523.774830000002), Brick(type='down', open=24849.57944, close=23175.38405, low=23175.38405, high=24849.57944), Brick(type='down', open=23175.38405, close=21758.67722, low=21758.67722, high=23175.38405), Brick(type='down', open=21758.67722, close=20473.39469, low=20473.39469, high=21758.67722), Brick(type='down', open=20473.39469, close=19183.859660000002, low=19183.859660000002, high=20473.39469), Brick(type='up', open=20473.39469, close=21668.55446, low=20473.39469, high=21668.55446), Brick(type='up', open=21668.55446, close=23081.807, low=21668.55446, high=23081.807), Brick(type='down', open=21668.55446, close=20194.5674, low=20194.5674, high=24441.38), Brick(type='down', open=20194.5674, close=18932.1986, low=18932.1986, high=20194.5674), Brick(type='up', open=20194.5674, close=21378.37583, low=20194.5674, high=21378.37583), Brick(type='down', open=20194.5674, close=18830.72198, low=18830.72198, high=22395.74), Brick(type='down', open=18830.72198, close=17667.6563, low=17667.6563, high=21299.37), Brick(type='down', open=17667.6563, close=16504.59062, low=16504.59062, high=17667.6563), Brick(type='up', open=17667.6563, close=18670.79333, low=15781.29, high=18670.79333), Brick(type='up', open=18670.79333, close=19858.13039, low=18670.79333, high=19858.13039), Brick(type='up', open=19858.13039, close=21113.721019999997, low=19858.13039, high=21113.721019999997), Brick(type='up', open=21113.721019999997, close=22448.41697, low=21113.721019999997, high=22448.41697), Brick(type='up', open=22448.41697, close=23876.4512, low=22448.41697, high=23876.4512), Brick(type='down', open=22448.41697, close=20916.001819999998, low=20916.001819999998, high=24842.2), Brick(type='up', open=22448.41697, close=23731.236829999998, low=20150.69, high=23731.236829999998), Brick(type='up', open=23731.236829999998, close=25250.386069999997, low=23731.236829999998, high=25250.386069999997), Brick(type='up', open=25250.386069999997, close=26769.535309999996, low=25250.386069999997, high=26769.535309999996), Brick(type='up', open=26769.535309999996, close=28495.428499999995, low=26769.535309999996, high=28495.428499999995), Brick(type='up', open=28495.428499999995, close=30362.580919999993, low=28495.428499999995, high=30362.580919999993), Brick(type='down', open=28495.428499999995, close=26581.876579999993, low=26581.876579999993, high=30466.93), Brick(type='up', open=28495.428499999995, close=30154.156129999996, low=25128.6, high=30154.156129999996)]
    raw_data_length = 500

    score = calculate_score(bricks, raw_data_length)

    assert score == 0.2062718137073183
